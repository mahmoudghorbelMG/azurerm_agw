---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "azurermagw_binding_service Resource - terraform-provider-azurermagw"
subcategory: ""
description: |-
  
---

# azurermagw_binding_service (Resource)

Manages binding service resource.

## Example Usage
```hcl
locals {
  probe_name                  = "probe-example"
  ssl_certificate_name        = "ssl-certificate-example"
  secret_id                   = "https://keyvault-name.vault.azure.net/secrets/kv-ssl-certificate-name"
  frontend_ip_configuration   = "app-gateway-fe-ip-config"
  frontend_port_http          = "app-gateway-fe-port"
  frontend_port_https         = "app-gateway-fe-port-443"
  backend_address_pool_name   = "backendAddressPool-example"
  backend_http_settings_name  = "backendHttpSettings-example"
  redirect_configuration_name = "redirectconfiguration-example"
  https_listener1_name        = "http-listener-example-https1"
  https_listener2_name        = "http-listener-example-https2"
  http_listener_name          = "http-listener-example-http"
}
resource "azurermagw_binding_service" "binding-service-resource" {
  name                                    = "binding-service-example"
  application_gateway_name                = "application-gateway-name"
  application_gateway_resource_group_name = "resource-group-name"

backend_address_pool = {
    name         = local.backend_address_pool_name
    fqdns        = ["www.my-app-backend.com"]
    ip_addresses = ["10.2.3.3"]
  }

  backend_http_settings = {
    name                                = local.backend_http_settings_name
    cookie_based_affinity               = "Disabled"
    pick_host_name_from_backend_address = true
    port                                = 443
    probe_name                          = local.probe_name 
    protocol                            = "Https"
    request_timeout                     = 667
  }

  probe = {
    name                                      = local.probe_name 
    interval                                  = 30
    protocol                                  = "Https"
    path                                      = "/"
    timeout                                   = 30
    unhealthy_threshold                       = 3
    pick_host_name_from_backend_http_settings = true
    minimum_servers                           = 1
    match = {
      body        = ""
      status_code = ["200-399"]
    }
  }

  redirect_configuration = {
    name                 = local.redirect_configuration_name
    redirect_type        = "Permanent"
    target_listener_name = local.https_listener1_name
  }

  ssl_certificate = {
    name                = local.ssl_certificate_name
    key_vault_secret_id = local.secret_id
  }

  http_listeners = {
    "http_0" = {
        frontend_ip_configuration_name = local.frontend_ip_configuration
        frontend_port_name             = local.frontend_port_http
        host_name                      = "www.my-app.com"
        name                           = local.http_listener_name
        protocol                       = "Http"
        require_sni                    = false
    },
    "my-https-listener-key" = {
        frontend_ip_configuration_name =local.frontend_ip_configuration
        frontend_port_name             = local.frontend_port_https
        host_name                      = "www.my-app.com"
        name                           = local.https_listener1_name
        protocol                       = "Https"
        require_sni                    = true
        ssl_certificate_name           = local.ssl_certificate_name
    },
    "https-listener-2" = {
        frontend_ip_configuration_name =local.frontend_ip_configuration
        frontend_port_name             = local.frontend_port_https
        host_name                      = "www.my-app-2.com"
        name                           = local.https_listener2_name
        protocol                       = "Https"
        require_sni                    = true
        ssl_certificate_name           = local.ssl_certificate_name
    }
  }

  request_routing_rules = {
    "request_routing_rule_https1" = {
        backend_address_pool_name  = local.backend_address_pool_name
        backend_http_settings_name = local.backend_http_settings_name
        http_listener_name         = local.https_listener1_name
        name                       = "requestroutingrule-example1"
        rule_type                  = "Basic"
    },
    "request_routing_rule_http" = {
        http_listener_name          = local.http_listener_name
        name                        = "requestroutingrule-example2"
        rule_type                   = "Basic"
        redirect_configuration_name = local.redirect_configuration_name
    },
    "request_routing_rule_https2" = {
        http_listener_name          = local.https_listener2_name
        name                        = "requestroutingrule-example3"
        rule_type                   = "Basic"
        redirect_configuration_name = local.redirect_configuration_name
    }
  }
}

```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `application_gateway_name` (String) The name of the application gateway to which the backend application will be binded.
- `application_gateway_resource_group_name` (String) The name of the resource group where the application gateway is deployed.
- `backend_address_pool` (Attributes) For this provider version, only one `backend_address_pool` block can be set as defined below. (see [below for nested schema](#nestedatt--backend_address_pool))
- `backend_http_settings` (Attributes) For this provider version, only one `backend_http_settings` block can be set as defined below. (see [below for nested schema](#nestedatt--backend_http_settings))
- `http_listeners` (Attributes Map) At least one block has to be defined. The http_listeners block has to be defiend as a mapwith a key name for each `http_listener`. See Example usage for details. (see [below for nested schema](#nestedatt--http_listeners))
- `name` (String) The name of the binding service that bind an backend application (VM, web app, container web app, etc.) to the azure application gateway.
- `probe` (Attributes) For this provider version, only one `probe` block can be set as defined below (see [below for nested schema](#nestedatt--probe))
- `redirect_configuration` (Attributes) For this provider version, only one `redirect_configuration` block can be set as defined below (see [below for nested schema](#nestedatt--redirect_configuration))
- `request_routing_rules` (Attributes Map) At least one block has to be defined. The request routing rules block has to be defiend as a map with a key name for each `request_routing_rule`. See Example usage for details. (see [below for nested schema](#nestedatt--request_routing_rules))
- `ssl_certificate` (Attributes) For this provider version, only one `ssl_certificate` block can be set as defined below (see [below for nested schema](#nestedatt--ssl_certificate))

<a id="nestedatt--backend_address_pool"></a>
### Nested Schema for `backend_address_pool`

Required:

- `name` (String) The name of the Backend Address Pool.

Optional:

- `fqdns` (List of String) A list of FQDN's which should be part of the Backend Address Pool.
- `ip_addresses` (List of String) A list of IP Addresses which should be part of the Backend Address Pool.

Read-Only:

- `id` (String) The ID of the `backend_address_pool`.


<a id="nestedatt--backend_http_settings"></a>
### Nested Schema for `backend_http_settings`

Required:

- `cookie_based_affinity` (String) Is Cookie-Based Affinity enabled? Possible values are `Enabled` and `Disabled`.
- `name` (String) The name of the Backend HTTP Settings Collection.
- `port` (Number) The port which should be used for this Backend HTTP Settings Collection.
- `protocol` (String) The Protocol which should be used. Possible values are `Http` and `Https`.
- `request_timeout` (Number) The request timeout in seconds, which must be between 1 and 86400 seconds.

Optional:

- `affinity_cookie_name` (String) The name of the affinity cookie. Required if `cookie_based_affinity` is `Enabled`
- `pick_host_name_from_backend_address` (Boolean) Whether host header should be picked from the host name of the backend server. Defaults to `false`.
- `probe_name` (String) The name of an associated HTTP Probe.

Read-Only:

- `id` (String) The ID of the `backend_http_settings`.


<a id="nestedatt--http_listeners"></a>
### Nested Schema for `http_listeners`

Required:

- `frontend_ip_configuration_name` (String) The Name of the Frontend IP Configuration used for this HTTP Listener.
- `frontend_port_name` (String) The Name of the Frontend Port use for this HTTP Listener.
- `name` (String) The Name of the HTTP Listener.
- `protocol` (String) The Protocol to use for this HTTP Listener. Possible values are `Http` and `Https`.

Optional:

- `host_name` (String) The Hostname which should be used for this HTTP Listener. Setting this value changes Listener Type to 'Multi site', however, this option is not supported by the provider version.
- `host_names` (List of String) A list of Hostname(s) should be used for this HTTP Listener. It allows special wildcard characters.The `host_names` and `host_name` are mutually exclusive and cannot both be set.
- `require_sni` (Boolean) Should Server Name Indication be Required? Defaults to `false`.
- `ssl_certificate_name` (String) The name of the associated SSL Certificate which should be used for this HTTP Listener.It has to match a Ssl certificate name declared in the binding service resource.

Read-Only:

- `id` (String) The ID of the `http_listener`.


<a id="nestedatt--probe"></a>
### Nested Schema for `probe`

Required:

- `interval` (Number) The Interval between two consecutive probes in seconds. Possible values range from 1 second to a maximum of 86,400 seconds.
- `match` (Attributes) A `match` block as defined above. (see [below for nested schema](#nestedatt--probe--match))
- `name` (String) The Name of the Probe.
- `path` (String) The Path used for this Probe.
- `protocol` (String) The Protocol used for this Probe. Possible values are `Http` and `Https`.
- `timeout` (Number) The Timeout used for this Probe, which indicates when a probe becomes unhealthy. Possible values range from 1 second to a maximum of 86,400 seconds.
- `unhealthy_threshold` (Number) The Unhealthy Threshold for this Probe, which indicates the amount of retries which should be attempted before a node is deemed unhealthy. Possible values are from 1 to 20.

Optional:

- `minimum_servers` (Number) The minimum number of servers that are always marked as healthy. Defaults to `0`.
- `pick_host_name_from_backend_http_settings` (Boolean) Whether the host header should be picked from the backend HTTP settings. Defaults to `false`.

Read-Only:

- `id` (String) The ID of the `probe`.

<a id="nestedatt--probe--match"></a>
### Nested Schema for `probe.match`

Required:

- `body` (String) A snippet from the Response Body which must be present in the Response.
- `status_code` (List of String) A list of allowed status codes for this Health Probe.



<a id="nestedatt--redirect_configuration"></a>
### Nested Schema for `redirect_configuration`

Required:

- `name` (String) Unique name of the redirect configuration block.
- `redirect_type` (String) The type of redirect. Possible values are `Permanent`, `Temporary`, `Found` and `SeeOther`.

Optional:

- `include_path` (Boolean) Whether or not to include the path in the redirected Url. Defaults to `false`.
- `include_query_string` (Boolean) Whether or not to include the query string in the redirected Url. Default to `false`.
- `target_listener_name` (String) The name of the listener to redirect to. Cannot be set if `target_url` is set.
- `target_url` (String) The Url to redirect the request to. Cannot be set if `target_listener_name` is set.

Read-Only:

- `id` (String) The ID of the `redirect_configuration`.


<a id="nestedatt--request_routing_rules"></a>
### Nested Schema for `request_routing_rules`

Required:

- `http_listener_name` (String) The Name of the HTTP Listener which should be used for this Routing Rule. It has to match a Http Listener name declared in the binding service resource.
- `name` (String) The Name of this Request Routing Rule.
- `rule_type` (String) The Type of Routing that should be used for this Rule. Possible values are `Basic` and `PathBasedRouting`.

Optional:

- `backend_address_pool_name` (String) The Name of the Backend Address Pool which should be used for this Routing Rule. Cannot be set if `redirect_configuration_name` is set.It has to match a Backend Address Pool name declared in the binding service resource.
- `backend_http_settings_name` (String) The Name of the Backend HTTP Settings Collection which should be used for this Routing Rule. Cannot be set if `redirect_configuration_name` is set.It has to match a Backend HTTP Settings name declared in the binding service resource.
- `redirect_configuration_name` (String) The Name of the Redirect Configuration which should be used for this Routing Rule. Cannot be set if either `backend_address_pool_name` or `backend_http_settings_name` is set.It has to match a Redirect Configuration name declared in the binding service resource.
- `rewrite_rule_set_name` (String) The Name of the Rewrite Rule Set which should be used for this Routing Rule. Only valid for v2 SKUs. Not supported in this version
- `url_path_map_name` (String) The Name of the URL Path Map which should be associated with this Routing Rule. Not supported in this version

Read-Only:

- `id` (String) The ID of the `request_routing_rule`.
- `priority` (String) Rule evaluation order can be dictated by specifying an integer value from `1` to `20000` with `1` being the highest priority and `20000` being the lowest priority.For this version, the priority is computed by the provider (between 1 and 300) after getting the list of used values from the gateway.


<a id="nestedatt--ssl_certificate"></a>
### Nested Schema for `ssl_certificate`

Required:

- `name` (String) The Name of the SSL certificate that is unique within this Application Gateway

Optional:

- `data` (String, Sensitive) PFX certificate. Required if `key_vault_secret_id` is not set. Important: PFX certificate is not supported in the current provider version.
- `key_vault_secret_id` (String) Secret Id of (base-64 encoded unencrypted pfx) `Secret` or `Certificate` object stored in Azure KeyVault. You need to enable soft delete for keyvault to use this feature. Required if `data` is not set. TLS termination with Key Vault certificates is limited to the v2 SKUs.
- `password` (String, Sensitive) Password for the pfx file specified in data. Required if `data` is set.

Read-Only:

- `id` (String) The ID of the `ssl_certificate`.


